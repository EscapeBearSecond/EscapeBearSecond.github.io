[{"categories":["数据库"],"content":"MyIsam和InnoDB区别 存储引擎的统计数据是精确的 ","date":"2024-05-31","objectID":"/mysql%E8%B0%83%E4%BC%98/:0:0","tags":["MySQL","数据库"],"title":"MySQL调优","uri":"/mysql%E8%B0%83%E4%BC%98/"},{"categories":["数据库"],"content":"什么是MySQL调优 MySQL调优是指对MySQL数据库进行性能优化的一系列操作，旨在提高数据库的运行效率、响应速度和稳定性。简单来说MySQL调优就是将原本执行较慢的SQL语句，通过一些列的优化转换成执行相对较快的SQL语句。 在MySQL的各种语句中（SELECT UPDATE INSERT DROP），SELECT语句往往是最需要进行调优的 ","date":"2024-05-31","objectID":"/mysql%E8%B0%83%E4%BC%98/:1:0","tags":["MySQL","数据库"],"title":"MySQL调优","uri":"/mysql%E8%B0%83%E4%BC%98/"},{"categories":["数据库"],"content":"调优金字塔 MySQL调优可以从多个方面进行，包括架构调优、MySQL本身调优、硬件调优 越往上成本、难度越来越高，但是带来的收益却是越来越小，所以在优化时，往往优先考虑下方的优化方式 架构调优 在进行架构设计时，首先要考虑业务的实际情况，是否可以把不适合数据库做的事情放在其他服务中，如数据仓库、搜索引擎、数据缓存等等 考虑数据库的并发量是否较大，是否采用分布式架构 考虑读的压力是否较大，是否需要读写分离 MySQL调优 设计合理的表结构 优化SQL语句 添加索引 硬件调优 这个一般不需要太多的关注，如果是DBA的话，需要自己去学一些操作系统和硬件的知识 ","date":"2024-05-31","objectID":"/mysql%E8%B0%83%E4%BC%98/:2:0","tags":["MySQL","数据库"],"title":"MySQL调优","uri":"/mysql%E8%B0%83%E4%BC%98/"},{"categories":["数据库"],"content":"慢查询 ","date":"2024-05-31","objectID":"/mysql%E8%B0%83%E4%BC%98/:3:0","tags":["MySQL","数据库"],"title":"MySQL调优","uri":"/mysql%E8%B0%83%E4%BC%98/"},{"categories":["数据库"],"content":"什么是慢查询 慢查询就是一条SELECT语句执行需要花费大量时间，这个时间往往不被系统或用户能接受（比如10s钟） 在MySQL中慢查询就是指执行时间超过MySQL服务器所设定的long_quer_time时间的SELECT语句，所有超过该时间的语句都会被记录在慢查询日志中。 在MySQL中可以通过show VARIABLES like '%slow_query_time%' set global long_query_time=0来查看和设置慢查询的时间阈值。（设置为0，就表示任何查询都是慢查询，都会被记录在慢查询日志中） 在MySQL中可以通过show VARIABLES like 'slow_query_log'和set GLOBAL slow_query_log=1来查询和开启慢查询日志，如果慢查询日志没有开启，则不会被记录。 如果希望将没有使用索引的SELECT语句也记录在慢查询日志中，可以通过set VARIABLES 'log_queries_not_using_indexes'来开启 在MySQL中通过show VARIABLES like '%slow_query_log_file%'来查看慢日志所在的磁盘位置 ","date":"2024-05-31","objectID":"/mysql%E8%B0%83%E4%BC%98/:3:1","tags":["MySQL","数据库"],"title":"MySQL调优","uri":"/mysql%E8%B0%83%E4%BC%98/"},{"categories":["数据库"],"content":"为何会产生慢查询 其实产生慢查询的最终原因就是因为MySQL服务器要扫描的数据过多，这里可以是因为要扫描的数据行过多，也可能是因为要返回的数据列过多。所以MySQL调优主要是尽可能的让MySQL服务器只扫描自己需要的数据，不去扫描额外的数据，这样就能将MySQL性能发挥到最大。 几个概念 响应时间：响应时间是指语句执行所花费的时间，它由服务时间和排队时间两个部分组成 排队时间是指服务器因为等待某些资源而没有真正执行查询的时间，可能是等待IO操作完成，或等待行锁 服务时间是指这条SELECT语句真正执行的时间 扫描行数：MySQL为了找到目标的数据，在服务器中所扫描的记录数 返回行数：最终需要的记录数 显然对于一条SELECT语句，响应时间越短越好，扫描行数与返回行数的比，越小越好，但是最小是1，即扫描多少条数据，返回多少条数据 如果发现查询需要扫描大量的数据，但是只返回少量的数据，那么可以通过下面几种方法尝试优化： 使用覆盖索引，把所有需要使用的列都放到索引中，减少回表次数 改变库表结构，例如使用汇总表 这个查询频繁使用，访问大量数据并进行复杂计算 对实时性要求不高，可以接受一定程度的延迟更新汇总数据 如果SELECT较为复杂，可以尝试重写优化，让MySQL优化器能够以更优化的方式执行这个查询 注意：在一条SELECT语句中，除非特殊情况，否则一定要避免使用SELECT * FROM table，最好是按需查询。我自己在刚工作时，就遇到过这种情况，在一张有两万多条记录的表中，有四五条记录的一个字段数据非常大（大约几MB），所以我当时使用SELECT *时，一直报慢查询相关错误，恰巧这个字段我并不需要。但是后面还是有大佬通过一些压缩算法把数据压缩了。 ","date":"2024-05-31","objectID":"/mysql%E8%B0%83%E4%BC%98/:3:2","tags":["MySQL","数据库"],"title":"MySQL调优","uri":"/mysql%E8%B0%83%E4%BC%98/"},{"categories":["数据库"],"content":"执行计划 前面说了慢查询会被记录在慢查询日志中，那么如何排查这条慢查询是因何而导致呢？是因为没有使用索引？还是因为扫描的记录数较多？又或是因为等待锁？这时候 ","date":"2024-05-31","objectID":"/mysql%E8%B0%83%E4%BC%98/:4:0","tags":["MySQL","数据库"],"title":"MySQL调优","uri":"/mysql%E8%B0%83%E4%BC%98/"},{"categories":null,"content":"关于 LoveIt","date":"2019-08-02","objectID":"/about/","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"特性 ","date":"2019-08-02","objectID":"/about/:1:0","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"性能和 SEO  性能优化：在 Google PageSpeed Insights 中， 99/100 的移动设备得分和 100/100 的桌面设备得分  使用基于 JSON-LD 格式 的 SEO SCHEMA 文件进行 SEO 优化  支持 Google Analytics  支持 Fathom Analytics  支持 Plausible Analytics  支持 Yandex Metrica  支持搜索引擎的网站验证 (Google, Bind, Yandex and Baidu)  支持所有第三方库的 CDN  基于 lazysizes 自动转换图片为懒加载 ","date":"2019-08-02","objectID":"/about/:1:1","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"外观和布局  桌面端/移动端 响应式布局  浅色/深色 主题模式  全局一致的设计语言  支持分页  易用和自动展开的文章目录  支持多语言和国际化  美观的 CSS 动画 社交和评论系统  支持 Gravatar 头像  支持本地头像  支持多达 73 种社交链接  支持多达 24 种网站分享  支持 Disqus 评论系统  支持 Gitalk 评论系统  支持 Valine 评论系统  支持 Facebook comments 评论系统  支持 Telegram comments 评论系统  支持 Commento 评论系统  支持 utterances 评论系统  支持 giscus 评论系统 ","date":"2019-08-02","objectID":"/about/:1:2","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"扩展功能  支持基于 Lunr.js 或 algolia 的搜索  支持 Twemoji  支持代码高亮  一键复制代码到剪贴板  支持基于 lightGallery 的图片画廊  支持 Font Awesome 图标的扩展 Markdown 语法  支持上标注释的扩展 Markdown 语法  支持分数的扩展 Markdown 语法  支持基于 $\\KaTeX$ 的数学公式  支持基于 mermaid 的图表 shortcode  支持基于 ECharts 的交互式数据可视化 shortcode  支持基于 Mapbox GL JS 的 Mapbox shortcode  支持基于 APlayer 和 MetingJS 的音乐播放器 shortcode  支持 Bilibili 视频 shortcode  支持多种注释的 shortcode  支持自定义样式的 shortcode  支持自定义脚本的 shortcode  支持基于 TypeIt 的打字动画 shortcode  支持基于 cookieconsent 的 Cookie 许可横幅  支持人物标签的 shortcode … ","date":"2019-08-02","objectID":"/about/:1:3","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"许可协议 LoveIt 根据 MIT 许可协议授权。 更多信息请查看 LICENSE 文件。 ","date":"2019-08-02","objectID":"/about/:2:0","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"特别感谢 LoveIt 主题中用到了以下项目，感谢它们的作者： normalize.css Font Awesome Simple Icons Animate.css autocomplete Lunr.js algoliasearch lazysizes object-fit-images Twemoji emoji-data lightGallery clipboard.js Sharer.js TypeIt $\\KaTeX$ mermaid ECharts Mapbox GL JS APlayer MetingJS Gitalk Valine cookieconsent ","date":"2019-08-02","objectID":"/about/:3:0","tags":null,"title":"关于 LoveIt","uri":"/about/"}]